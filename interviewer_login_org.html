<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <script>
      if(localStorage.getItem('interviewerId') != null) {
        var intv_db = (window.location.protocol + "//" + window.location.host + "/interview-management/interviewer_dashboard.html");
        window.location.replace(intv_db);

      }
    </script>
    <title>Login</title>
  </head>
  <body>
    <div id="main">
    <form>
      <h1 class="title">Login</h1>
      <div class="form-group">
           <label for="Email">Email address</label>
           <input type="email" class="form-control" id="Email" aria-describedby="emailHelp" placeholder="Enter email" required>
           </div>
     <div class="form-group">
           <label for="Password">Password</label>
           <input type="password" class="form-control" id="password"  placeholder="Enter Password" required>
     </div>
     <a href="#" onclick="intv_fp()" style="float:right;padding-bottom:10px ">forgot password?</a>
       <button type="submit" id='btn' class="button" >Login</button>
    </form>
    </div>
  </body>
  <script>
    function intv_fp(){
      let change_pw = (window.location.protocol + "//" + window.location.host + "/interview-management/interviewer_changepassword.html");
          window.location.replace(change_pw);
    }
  </script>
  <script>
    let emp_data = [];

    const add_emp = (ev)=>{
        ev.preventDefault();  //to stop the form submitting
        let details = {
            'email': document.getElementById('Email').value,
            'password': document.getElementById('password').value

          }
      emp_data.push(details);

      console.warn('added' , {emp_data} );
      const options ={
        method:"POST",
        headers: {
          'Content-Type': 'application/json'

        },
          body: JSON.stringify(details)
        };
        fetch('https://hr502.herokuapp.com/interviewer/login', options)
        .then(function(response) {
          return response.json();
        }).then(function(text){
          console.log(text);
          console.log(text.status);
          if(text.status === 'OK'){
            localStorage.setItem("interviewerId",text.interviewerId);
            localStorage.setItem("intv_token",text.token);
            var intv_db = (window.location.protocol + "//" + window.location.host + "/interview-management/interviewer_dashboard.html");
            window.location.replace(intv_db);
          }
          else if (text.status==='Failed') {
            alert(text.msg);
          }
          else{
            alert('wrong inputs');
          }
        })
      };
      document.addEventListener('DOMContentLoaded', ()=>{
      document.getElementById('btn').addEventListener('click', add_emp);
    });
  </script>
</html>
